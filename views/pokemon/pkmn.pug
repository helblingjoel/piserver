extend  ../components/header.pug

block append head
    title Pokemon
    script(src='/static/scripts/shinytoggle.js')

block append body
    .container.is-max-desktop.pl-6.pr-6
        nav.breadcrumb(aria-label="breadcrumbs")
            ul
                li
                    a(href="/") Home
                li
                    a(href="/pokemon") Pokemon
                li
                    a(href="/pokemon/search") Search
                li.is-active
                    a(aria-current="page") Pokemon ##{id}
        
        form(action="/pokemon/search", method="get", id="search").mb-6
            input.input(type="text" name="search" placeholder="Search for something!" onsubmit="document.forms['search'].submit()")
            input(type="submit" hidden)


        .columns
            .column
                .card 
                    .card-header
                        if germanName !== englishName
                            .card-header-title
                                p ðŸ‡©ðŸ‡ª #{germanName}
                            .card-header-title
                                p ðŸ‡¬ðŸ‡§ #{englishName}
                            .card-header-icon
                                p ##{id}
                        else
                            .card-header-title
                                p #{germanName}
                    .card-content
                        .columns.mb-0
                            .column
                                img(src=`${spriteFront}` style="height: auto; width: 100%")#sprite-front
                            .column
                                img(src=`${spriteBack}` style="height: auto; width: 100%")#sprite-back
                        .columns.is-centered.mb-2
                            button.button.is-centered#shiny-toggle Shiny
            .column
                .card
                    .card-header
                        .card-header-title
                            p Evolution
                    .card-content
                        each evolution, index in evolutionChain
                            if evolution.evolutions.length === 0
                                .columns
                                    .column.has-text-centered
                                        img(src=`${evolution.speciesSprite}`)

                            each siblingEvolution in evolution.evolutions
                                .columns.is-vcentered
                                    .column.has-text-centered(onclick=`location.href='/pokemon/pkmn/${evolution.species}'`)
                                        img(src=`${evolution.speciesSprite}`)
                                    .column.has-text-centered
                                            each condition in siblingEvolution.conditions
                                                if Object.keys(condition).includes("level")
                                                    p Level: #{condition.level}
                                                    
                                                if Object.keys(condition).includes("gender")
                                                    if condition.gender === 2
                                                        p Male
                                                    else if condition.gender === 1
                                                        p Female

                                                if Object.keys(condition).includes("item")
                                                    img(src=`${condition.itemSprite}` style="width: 40%; height: auto" onclick=`location=href='/pokemon/item/${condition.item}'`)

                                                if Object.keys(condition).includes("happiness")
                                                    p Freundschaft + Level hoch
                                                    hr.m-2
                                                    p Happiness + Level up

                                                if condition.trigger === "shed"
                                                    p 5 Pkmn in team + 1 Pokeball
                                                    p Level: 20

                                                if condition.trigger === "spin"
                                                    p Gib eine SÃ¼ssigkeit und drehe im Kreis
                                                    hr.m-2
                                                    p Give a sweet and spin your character

                                                if condition.trigger === "tower-of-darkness"
                                                    p Turm des Unlichts
                                                    hr.m-2
                                                    p Tower of Darkness

                                                if condition.trigger === "tower-of-waters"
                                                    p Turm des Wassers
                                                    hr.m-2
                                                    p Tower of Waters

                                                if condition.trigger === "three-critical-hits"
                                                    p 3 Volltreffer
                                                    hr.m-2
                                                    p 3 Critical hits
                                                
                                                if condition.trigger === "take-damage"
                                                    p Nimm schaden
                                                    hr.m-2
                                                    p Take damage

                                    .column.has-text-centered(onclick=`location.href='/pokemon/pkmn/${siblingEvolution.target}'`)
                                        img(src=`${siblingEvolution.targetSprite}`)
                        
                            
